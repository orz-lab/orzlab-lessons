<div class="lesson-sidebar">
  <h4 class="sidebar-title">Topic Lessons</h4>
  <ul class="lesson-list">
    {% assign course_id = page.course_id %}
    {% assign course_path = "topics/" | append: course_id | append: "/lessons" %}
    {% assign lessons = site.pages | where_exp: "item", "item.path contains course_path" | sort: "lesson_number" %}
    
    {% for lesson in lessons %}
      <li class="lesson-item {% if lesson.url == page.url %}active{% endif %}">
        <a href="{{ lesson.url | relative_url }}" class="lesson-link">
          <span class="lesson-number">{{ lesson.lesson_number }}</span>
          <span class="lesson-title">{{ lesson.title }}</span>
        </a>
      </li>
    {% endfor %}
  </ul>
</div>